{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/components/webcam/webcam.js","webpack:///./src/pages/index.js"],"names":["pointersGesture","getAnotherPointer","pointerId","secondGesturePointerId","Object","keys","some","gesturePointerId","pinchGesture","beginDistance","rotateGesture","beginAngle","Webcam","constructor","element","container","querySelector","image","brightnessDisplay","scaleDisplay","height","parseInt","clientHeight","brightness","MAX","MIN","scale","settings","dx","initEvents","renderIndicator","type","value","innerText","style","filter","toFixed","transform","changeBrightness","turnInRadians","mapRadiansToBrightness","radians","Math","ceil","brightnessIncrement","scaleCamera","dy","scaleRatio","moveCamera","backgroundPosition","addEventListener","addPointer","forEach","event","removePointer","movePointer","bind","e","prevX","x","prevY","y","startX","startY","isPrimary","id","gesture","isOnePointerMove","length","isPartOfTwoPointersMove","tryPinchGesture","firstGesture","secondGesture","tryRotateGesture","hypot","currentDistance","x1","y1","x2","y2","atan2","currentAngle","changeAngle","rotationAngle","PI","webcamElement","document","getElementById","homeWebcam"],"mappings":"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","file":"main.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./src/pages/index.js\");\n","const pointersGesture = {};\r\n\r\n// looking for id of the second pointer\r\nfunction getAnotherPointer(pointerId) {\r\n\tlet secondGesturePointerId;\r\n\r\n\tObject.keys(pointersGesture).some(gesturePointerId => {\r\n\t\tif (gesturePointerId !== pointerId) {\r\n\t\t\tsecondGesturePointerId = gesturePointerId;\r\n\t\t\treturn true;\r\n\t\t}\r\n\r\n\t\treturn false;\r\n\t});\r\n\r\n\treturn secondGesturePointerId;\r\n}\r\n\r\nconst pinchGesture = {\r\n\tbeginDistance: null\r\n};\r\n\r\nconst rotateGesture = {\r\n\tbeginAngle: 0\r\n};\r\n\r\nclass Webcam {\r\n\tconstructor(element) {\r\n\t\tthis.element = {\r\n\t\t\tcontainer: element.querySelector(\".webcam-field\"),\r\n\t\t\timage: element.querySelector(\".webcam-image\"),\r\n\t\t\tbrightnessDisplay: element.querySelector(\r\n\t\t\t\t\".webcam-info_type-bright .webcam-info__value\"\r\n\t\t\t),\r\n\t\t\tscaleDisplay: element.querySelector(\".webcam-info_type-zoom .webcam-info__value\")\r\n\t\t};\r\n\r\n\t\tthis.image = {\r\n\t\t\theight: parseInt(this.element.image.clientHeight)\r\n\t\t};\r\n\r\n\t\tthis.brightness = {\r\n\t\t\tMAX: 100,\r\n\t\t\tMIN: 0\r\n\t\t};\r\n\r\n\t\tthis.scale = {\r\n\t\t\tMAX: 1.5,\r\n\t\t\tMIN: 0.25\r\n\t\t};\r\n\r\n\t\tthis.settings = {\r\n\t\t\tdx: 0,\r\n\t\t\tscale: 1,\r\n\t\t\tbrightness: 50\r\n\t\t};\r\n\r\n\t\tthis.initEvents();\r\n\t}\r\n\r\n\trenderIndicator(type, value) {\r\n\t\tif (type === \"brightness\") {\r\n\t\t\tthis.element.brightnessDisplay.innerText = `${value}%`;\r\n\r\n\t\t\tthis.element.container.style.filter = `brightness(${value / 100})`;\r\n\t\t}\r\n\r\n\t\tif (type === \"scale\") {\r\n\t\t\tthis.element.scaleDisplay.innerText = `${(value * 100).toFixed(0)}%`;\r\n\r\n\t\t\tthis.element.image.style.transform = `scale(${value})`;\r\n\t\t}\r\n\t}\r\n\r\n\tchangeBrightness(turnInRadians) {\r\n\t\t// turn on 360 radians - means change brightness from zero to 100\r\n\t\tconst mapRadiansToBrightness = radians => {\r\n\t\t\tconst brightness = Math.ceil(100 / radians);\r\n\r\n\t\t\treturn brightness;\r\n\t\t};\r\n\r\n\t\tconst brightnessIncrement = mapRadiansToBrightness(turnInRadians);\r\n\r\n\t\t// TODO: refactoring, [min, max]\r\n\t\tif (this.settings.brightness + brightnessIncrement > this.brightness.MAX) {\r\n\t\t\tthis.settings.brightness = this.brightness.MAX;\r\n\t\t} else if (this.settings.brightness + brightnessIncrement < this.brightness.MIN) {\r\n\t\t\tthis.settings.brightness = this.brightness.MIN;\r\n\t\t} else {\r\n\t\t\tthis.settings.brightness += brightnessIncrement;\r\n\t\t}\r\n\r\n\t\tthis.renderIndicator(\"brightness\", this.settings.brightness);\r\n\t}\r\n\r\n\tscaleCamera(dy) {\r\n\t\t// нужно понять, как превратить dy в scale изображения\r\n\t\t// сейчас проблема в том, что я прибавляю scaleRatio к предыдущему значению\r\n\r\n\t\tconst scaleRatio = dy * 0.001;\r\n\r\n\t\t// TODO: refactoring, [min, max]\r\n\t\tif (this.settings.scale + scaleRatio > this.scale.MAX) {\r\n\t\t\tthis.settings.scale = this.scale.MAX;\r\n\t\t} else if (this.settings.scale + scaleRatio < this.scale.MIN) {\r\n\t\t\tthis.settings.scale = this.scale.MIN;\r\n\t\t} else {\r\n\t\t\tthis.settings.scale += scaleRatio;\r\n\t\t}\r\n\r\n\t\t// console.log(\"scale\", scaleRatio, `scale(${this.settings.scale})`);\r\n\r\n\t\tthis.renderIndicator(\"scale\", this.settings.scale);\r\n\t}\r\n\r\n\tmoveCamera(dx) {\r\n\t\tthis.settings.dx += dx;\r\n\r\n\t\tthis.element.image.style.backgroundPosition = this.settings.dx + \"px\";\r\n\t}\r\n\r\n\tinitEvents() {\r\n\t\tthis.element.container.addEventListener(\"pointerdown\", this.addPointer);\r\n\r\n\t\t[\"pointerup\", \"pointerout\", \"pointerleave\", \"pointercancel\"].forEach(event => {\r\n\t\t\tthis.element.container.addEventListener(event, this.removePointer);\r\n\t\t});\r\n\r\n\t\tthis.element.container.addEventListener(\"pointermove\", this.movePointer.bind(this));\r\n\t}\r\n\r\n\taddPointer(e) {\r\n\t\tpointersGesture[e.pointerId] = {\r\n\t\t\tprevX: e.x,\r\n\t\t\tprevY: e.y,\r\n\t\t\tstartX: e.x,\r\n\t\t\tstartY: e.y,\r\n\t\t\tisPrimary: e.isPrimary,\r\n\t\t\tid: e.pointerId\r\n\t\t};\r\n\t}\r\n\r\n\tremovePointer(e) {\r\n\t\tdelete pointersGesture[e.pointerId];\r\n\r\n\t\tpinchGesture.beginDistance = null;\r\n\t\trotateGesture.beginAngle = null;\r\n\t}\r\n\r\n\tmovePointer(e) {\r\n\t\tconst { pointerId, x, y } = e;\r\n\t\tconst gesture = pointersGesture[pointerId];\r\n\r\n\t\tif (!gesture) {\r\n\t\t\treturn null;\r\n\t\t}\r\n\r\n\t\tconst isOnePointerMove = Object.keys(pointersGesture).length === 1;\r\n\t\tconst isPartOfTwoPointersMove = Object.keys(pointersGesture).length === 2;\r\n\r\n\t\t// one pointer means camera move gesture\r\n\t\tif (isOnePointerMove) {\r\n\t\t\tconst dx = x - gesture.prevX;\r\n\r\n\t\t\tthis.moveCamera(dx);\r\n\t\t}\r\n\r\n\t\t// two pointers can be rotate or pinch gesture\r\n\t\tif (isPartOfTwoPointersMove) {\r\n\t\t\tlet secondGesturePointerId = getAnotherPointer(pointerId);\r\n\r\n\t\t\t// TODO: check, that rotate isn't active now\r\n\t\t\t// rotate gesture is primary, it's  a corner case of pinch\r\n\r\n\t\t\tthis.tryPinchGesture({\r\n\t\t\t\tevent: event,\r\n\t\t\t\tfirstGesture: pointersGesture[pointerId],\r\n\t\t\t\tsecondGesture: pointersGesture[secondGesturePointerId]\r\n\t\t\t});\r\n\r\n\t\t\t// rotate gesture\r\n\t\t\tthis.tryRotateGesture({\r\n\t\t\t\tevent: event,\r\n\t\t\t\tfirstGesture: pointersGesture[pointerId],\r\n\t\t\t\tsecondGesture: pointersGesture[secondGesturePointerId]\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tpointersGesture[pointerId].prevX = x;\r\n\t\tpointersGesture[pointerId].prevY = y;\r\n\t}\r\n\r\n\ttryPinchGesture({ event, firstGesture, secondGesture }) {\r\n\t\tif (!pinchGesture.beginDistance) {\r\n\t\t\tconst beginDistance = Math.hypot(\r\n\t\t\t\tfirstGesture.startX - secondGesture.startX,\r\n\t\t\t\tfirstGesture.startY - secondGesture.startY\r\n\t\t\t);\r\n\r\n\t\t\tpinchGesture.beginDistance = beginDistance;\r\n\t\t}\r\n\r\n\t\tconst currentDistance = Math.hypot(\r\n\t\t\tevent.x - secondGesture.prevX,\r\n\t\t\tevent.y - secondGesture.prevY\r\n\t\t);\r\n\r\n\t\tconst dy = currentDistance - pinchGesture.beginDistance;\r\n\r\n\t\t// pinch down\r\n\t\tthis.scaleCamera(dy);\r\n\t}\r\n\r\n\ttryRotateGesture({ event, firstGesture, secondGesture }) {\r\n\t\t// TODO: check distance between pointers,\r\n\t\t// in rotate gesture, distance between pointers should be consistent\r\n\r\n\t\t// caclulate beginAngle, angle in moment, when pointers was inited\r\n\t\tif (!rotateGesture.beginAngle) {\r\n\t\t\tconst x1 = firstGesture.startX;\r\n\t\t\tconst y1 = firstGesture.startY;\r\n\r\n\t\t\tconst x2 = secondGesture.startX;\r\n\t\t\tconst y2 = secondGesture.startY;\r\n\r\n\t\t\tconst dx = x2 - x1;\r\n\t\t\tconst dy = y2 - y1;\r\n\r\n\t\t\tconst beginAngle = Math.atan2(dy, dx);\r\n\r\n\t\t\trotateGesture.beginAngle = beginAngle;\r\n\t\t}\r\n\r\n\t\tconst x1 = event.x;\r\n\t\tconst y1 = event.y;\r\n\r\n\t\tconst x2 = secondGesture.prevX;\r\n\t\tconst y2 = secondGesture.prevY;\r\n\r\n\t\t// calculate CURRENT angle between fingers\r\n\t\tconst dx = x2 - x1;\r\n\t\tconst dy = y2 - y1;\r\n\r\n\t\tconst currentAngle = Math.atan2(dy, dx);\r\n\t\tconst changeAngle = currentAngle - rotateGesture.beginAngle;\r\n\r\n\t\tconst rotationAngle = (changeAngle * 180) / Math.PI;\r\n\r\n\t\tthis.changeBrightness(rotationAngle);\r\n\t}\r\n}\r\n\r\nexport default Webcam;\r\n","import Webcam from \"../components/webcam/webcam.js\";\r\n\r\nconst webcamElement = document.getElementById(\"webcam\");\r\n\r\nif (webcamElement) {\r\n  const homeWebcam = new Webcam(webcamElement);\r\n}\r\n"],"sourceRoot":""}